# Maven Configuration for Claude Code on the Web HTTP Proxy Compatibility
#
# This configuration is required because the container HTTP proxy violates RFC 7235
# by returning 401 Unauthorized instead of 407 Proxy Authentication Required.
#
# Issue: Maven 3.9.x+ native transport uses challenge-response authentication,
# which waits for a 407 status code to trigger proxy credential usage. When it
# receives 401 instead, it treats this as an origin server auth requirement and
# never sends the configured proxy credentials from settings.xml.
#
# Solution: Force Maven to use the legacy Wagon transport (Apache HttpClient 4.5)
# which uses preemptive authentication - it sends proxy credentials on the first
# request, bypassing the broken challenge-response flow entirely.

# Enable Basic authentication for HTTPS CONNECT tunneling
# Java 17+ disables Basic auth by default for security (credentials in cleartext)
-Djdk.http.auth.tunneling.disabledSchemes=

# Force Maven to use Wagon transport instead of native HTTP transport
# Wagon uses preemptive proxy authentication (works around RFC non-compliance)
-Dmaven.resolver.transport=wagon
