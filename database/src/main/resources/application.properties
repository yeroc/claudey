# Quarkus MCP Database Server Configuration

# Database Connection
# Configure via environment variables:
# - DB_URL: JDBC connection URL (e.g., jdbc:postgresql://localhost:5432/mydb or jdbc:sqlite:./test.db)
# - DB_USERNAME: Database username (optional for SQLite)
# - DB_PASSWORD: Database password (optional for SQLite)
#
# Note: Both PostgreSQL and SQLite drivers are included in the build.

# Database Configuration (used by DatabaseConfig)
db.jdbc.url=${DB_URL:}
db.username=${DB_USERNAME:}
db.password=${DB_PASSWORD:}

# HikariCP Connection Pool Configuration
# Pool size is small (2) because MCP stdio server is single-threaded
# Increase HIKARI_MAX_POOL_SIZE for multi-user deployments
hikari.maximum-pool-size=${HIKARI_MAX_POOL_SIZE:2}
hikari.pool-name=DatabaseConnectionPool

# Pagination Configuration
db.page-size=${DB_PAGE_SIZE:100}

# Quarkus Configuration
quarkus.banner.enabled=false
quarkus.application.name=mcp-database-server

# Logging Configuration
# File logging with daily rollover (console disabled for stdio compatibility)
quarkus.log.console.enabled=false
quarkus.log.file.enabled=true
quarkus.log.file.path=${HOME}/.${quarkus.application.name}.log
quarkus.log.file.format=%d{yyyy-MM-dd'T'HH:mm:ss.SSSXXX} %-5p %c{3.} - %s%e%n
quarkus.log.file.rotation.file-suffix=.yyyy-MM-dd
quarkus.log.level=INFO

# MCP Server Configuration
# Disable automatic initialization so we can control lifecycle manually
# Primary use case: CLI mode (--cli) should not start the MCP server
# Secondary benefit: Prevents non-daemon threads from blocking JVM shutdown during tests
quarkus.mcp.server.stdio.initialization-enabled=false
